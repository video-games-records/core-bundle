{# src/Resources/views/Admin/Object/PlayerChart/show.html.twig #}
{% extends '@SonataAdmin/CRUD/show.html.twig' %}
{% trans_default_domain 'VgrCoreAdmin' %}

{% block show_groups %}
    <div class="row">
        <!-- Score Information Section -->
        <div class="col-md-8">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">
                        <i class="fa fa-trophy"></i>
                        {% trans %}player_chart.sections.information{% endtrans %}
                    </h3>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-6">
                            <dl class="dl-horizontal">
                                <dt>{% trans %}player_chart.show.id{% endtrans %}</dt>
                                <dd><span class="label label-default">#{{ object.id }}</span></dd>
                                
                                <dt>{% trans %}player_chart.show.player{% endtrans %}</dt>
                                <dd>
                                    <strong>{{ object.player.pseudo }}</strong>
                                 </dd>

                                <dt>{% trans %}player_chart.show.status{% endtrans %}</dt>
                                <dd>
                                    {% set status_class = object.status == 'ACTIVE' ? 'success' : (object.status == 'INACTIVE' ? 'warning' : 'danger') %}
                                    <span class="label label-{{ status_class }}">{{ object.status }}</span>
                                </dd>
                            </dl>
                        </div>
                        <div class="col-md-6">
                            <dl class="dl-horizontal">
                                <dt>{% trans %}player_chart.show.platform{% endtrans %}</dt>
                                <dd>
                                    {% if object.platform %}
                                        {{ object.platform.name }}
                                    {% else %}
                                        <span class="text-muted">N/A</span>
                                    {% endif %}
                                </dd>

                                <dt>{% trans %}player_chart.show.lastUpdate{% endtrans %}</dt>
                                <dd>
                                    {% if object.lastUpdate %}
                                        <span class="text-muted">{{ object.lastUpdate|date('Y-m-d H:i:s') }}</span>
                                    {% else %}
                                        <span class="text-muted">Never</span>
                                    {% endif %}
                                </dd>

                                <dt>{% trans %}player_chart.show.dateInvestigation{% endtrans %}</dt>
                                <dd>
                                    {% if object.dateInvestigation %}
                                        <span class="text-warning">{{ object.dateInvestigation|date('Y-m-d H:i:s') }}</span>
                                    {% else %}
                                        <span class="text-muted">N/A</span>
                                    {% endif %}
                                </dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="col-md-4">
            <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title">
                        <i class="fa fa-external-link"></i>
                        Actions
                    </h3>
                </div>
                <div class="box-body">
                    <div class="btn-group-vertical" style="width: 100%;">
                        <a href="{{ app_front_url }}/en/{{ object.chart.url }}" 
                           target="_blank" 
                           class="btn btn-primary">
                            <i class="fa fa-chart-line"></i>
                            {% trans %}player_chart.links.viewChart{% endtrans %}
                        </a>
                        
                        {% if object.proof %}
                            <a href="{{ path('vgrcorebundle_admin_proof_show', {'id': object.proof.id}) }}"
                               class="btn btn-success">
                                <i class="fa fa-eye"></i>
                                {% trans %}player_chart.links.viewProof{% endtrans %}
                            </a>
                        {% endif %}
                        
                        <a href="{{ path('vgrcorebundle_admin_player_show', {'id': object.player.id}) }}"
                           class="btn btn-info">
                            <i class="fa fa-user"></i>
                            {% trans %}player_chart.links.viewPlayer{% endtrans %}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Context Section -->
    <div class="row">
        <div class="col-md-12">
            <div class="box box-success">
                <div class="box-header with-border">
                    <h3 class="box-title">
                        <i class="fa fa-gamepad"></i>
                        Game Context
                    </h3>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-4">
                            <dl class="dl-horizontal">
                                <dt>{% trans %}player_chart.show.game{% endtrans %}</dt>
                                <dd>
                                    <strong>{{ object.chart.group.game.libGameEn }}</strong>
                                </dd>
                            </dl>
                        </div>
                        <div class="col-md-4">
                            <dl class="dl-horizontal">
                                <dt>{% trans %}player_chart.show.group{% endtrans %}</dt>
                                <dd>{{ object.chart.group.libGroupEn }}</dd>
                            </dl>
                        </div>
                        <div class="col-md-4">
                            <dl class="dl-horizontal">
                                <dt>{% trans %}player_chart.show.chart{% endtrans %}</dt>
                                <dd>{{ object.chart.libChartEn }}</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Score Details and Proof Section -->
    {% if object.libs is not empty or object.proof %}
    <div class="row">
        {% if object.libs is not empty %}
        <div class="col-md-6">
            <div class="box box-warning">
                <div class="box-header with-border">
                    <h3 class="box-title">
                        <i class="fa fa-list"></i>
                        {% trans %}player_chart.sections.details{% endtrans %}
                    </h3>
                </div>
                <div class="box-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for lib in object.libs %}
                            <tr>
                                <td><strong>{{ lib.libChart.name }}</strong></td>
                                <td>{{ lib.value }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        {% endif %}

        {% if object.proof %}
        <div class="col-md-6">
            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">
                        <i class="fa fa-certificate"></i>
                        {% trans %}player_chart.show.proof{% endtrans %}
                    </h3>
                </div>
                <div class="box-body">
                    <dl class="dl-horizontal">
                        <dt>Status</dt>
                        <dd>
                            {% set proof_status_class = object.proof.status == 'ACCEPTED' ? 'success' : (object.proof.status == 'REFUSED' ? 'danger' : 'warning') %}
                            <span class="label label-{{ proof_status_class }}">{{ object.proof.status }}</span>
                        </dd>

                        <dt>Created</dt>
                        <dd>{{ object.proof.createdAt|date('Y-m-d H:i:s') }}</dd>

                        {% if object.proof.checkedAt %}
                        <dt>Checked</dt>
                        <dd>{{ object.proof.checkedAt|date('Y-m-d H:i:s') }}</dd>
                        {% endif %}
                    </dl>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
    {% endif %}
{% endblock %}